{% load i18n %}
{% for security_objective, maturity_levels in security_objectives.items %}
<div class="page-landscape">
  <h5 id="{{ security_objective.unique_code }}" class="fw-bold m-0">
    {{ security_objective.unique_code }}: {{ security_objective.objective }}
  </h5>
  <h6 class="card-subtitle mb-3 text-muted">{{ security_objective.description }}</h6>
  <table class="table table-sm table-hover small">
    <thead>
      <tr>
        <th class="col-1 text-center align-middle">
          {% translate "Level" %}
        </th>
        <th class="col-4 text-center align-middle">
          {% translate "Security Measure" %}
        </th>
        <th class="col-4 text-center align-middle">
          {% translate "Evidence" %}
        </th>
        <th class="col-1 text-center align-middle">
          {% translate "Measure in place ?" %}
        </th>
        <th class="{% if is_regulator %}col-2{% else %}col-2{% endif %} text-center align-middle">
          {% translate "Comment" %}
        </th>
        {% if is_regulator %}
        <th class="col-2 text-center align-middle">
          {% translate "Review Comment" %}
        </th>
        {% endif %}
      </tr>
    </thead>
    <tbody>
      {% for maturity_level, measures in maturity_levels.items %}
      {% for measure in measures %}
      <tr>
        {% if forloop.first %}
        <th rowspan="{{ measures|length }}" class="col-1 text-center align-middle lh-sm">
          {{ maturity_level }}
        </th>
        {% endif %}
        <td class="col-4 lh-sm">
          {{ measure }}
        </td>
        <td class="col-4 lh-sm">
          {{ measure.evidence|linebreaksbr }}
        </td>
        <td class="col-1 fixed-height">
          <div class="checkbox-is-measure d-flex justify-content-center align-items-center h-100">
            <div class="form-check">
              <input type="checkbox" class="form-check-input {% if measure.is_implemented %}checked{% else %}not-checked{% endif %}">
            </div>
          </div>
        </td>
        <td class="col-2 lh-sm">
          {{ measure.comment|default:""|linebreaksbr }}
        </td>
      </tr>
      {% empty %}
      <h3>{% translate "No security measures data" %}</h3>
      {% endfor %}
      {% endfor %}
    </tbody>
  </table>
  {% if not forloop.last %}
    <p class="page-break"></p>
  {% endif %}
  {% empty %}
  <h3>{% translate "No security objectives data" %}</h3>
</div>
{% endfor %}
